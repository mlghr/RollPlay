(this.webpackJsonprollplay=this.webpackJsonprollplay||[]).push([[0],{146:function(e,t,a){e.exports=a(288)},151:function(e,t,a){},153:function(e,t,a){},158:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},183:function(e,t){},185:function(e,t){},197:function(e,t){},199:function(e,t){},227:function(e,t){},229:function(e,t){},230:function(e,t){},235:function(e,t){},237:function(e,t){},256:function(e,t){},268:function(e,t){},271:function(e,t){},288:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(140),s=a.n(c),l=(a(151),a(3)),o=a.n(l),u=a(5),m=a(4),i=a(10);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=localStorage.getItem(e)||t,r=Object(n.useState)(a),c=Object(m.a)(r,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){console.debug("hooks useLocalStorage useEffect","item=",s),null===s?localStorage.removeItem(e):localStorage.setItem(e,s)}),[e,s]),[s,l]},f=r.a.createContext();a(153);var v=function(e){var t=e.logout,a=Object(n.useContext)(f).currentUser;return console.debug("Navigation","currentUser=",a),r.a.createElement("nav",{className:"Navigation navbar navbar-expand-md"},r.a.createElement(i.b,{className:"navbar-brand",to:"/"},"Roll Play"),a?r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item mr-4"},r.a.createElement(i.c,{className:"nav-link",to:"/match"},"Match")),r.a.createElement("li",{className:"nav-item mr-4"},r.a.createElement(i.c,{className:"nav-link",to:"/profile"},"Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/",onClick:t},"Log out"))):r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item mr-4"},r.a.createElement(i.c,{className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item mr-4"},r.a.createElement(i.c,{className:"nav-link",to:"/signup"},"Sign Up"))))},d=a(6);a(158);var b=function(){var e=Object(n.useContext)(f).currentUser;return console.debug("Homepage","currentUser=",e),r.a.createElement("div",{className:"Homepage"},r.a.createElement("div",{className:"container text-center"},r.a.createElement("h1",{className:"mb-4 font-weight-bold"},"Roll Play"),r.a.createElement("p",{className:"lead"},"Meet gamers on your terms."),r.a.createElement(i.b,{to:"/match",className:"btn btn-primary"},"Find Gamers"),e?r.a.createElement("h2",null,"Welcome Back, ",e.firstName||e.username,"!"):r.a.createElement("p",null,r.a.createElement(i.b,{className:"btn btn-primary font-weight-bold mr-3",to:"/login"},"Log in"),r.a.createElement(i.b,{className:"btn btn-primary font-weight-bold",to:"/signup"},"Sign up"))))},g=a(22),E=a(18);var h=function(e){var t=e.type,a=void 0===t?"danger":t,n=e.messages,c=void 0===n?[]:n;return console.debug("Alert","type=",a,"messages=",c),r.a.createElement("div",{className:"alert alert-".concat(a),role:"alert"},c.map((function(e){return r.a.createElement("p",{className:"mb-0 small",key:e},e)})))};var N=function(e){var t=e.login,a=Object(d.g)(),c=Object(n.useState)({username:"",password:""}),s=Object(m.a)(c,2),l=s[0],i=s[1],p=Object(n.useState)([]),f=Object(m.a)(p,2),v=f[0],b=f[1];function N(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(l);case 3:(r=e.sent).success?a.push("/companies"):b(r.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(g.a)({},a,n))}))}return console.debug("LoginForm","login=",typeof t,"formData=",l,"formErrors",v),r.a.createElement("div",{className:"LoginForm"},r.a.createElement("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4"},r.a.createElement("h3",{className:"mb-3"},"Log In"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:N},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",className:"form-control",value:l.username,onChange:j,autoComplete:"username",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:l.password,onChange:j,autoComplete:"current-password",required:!0})),v.length?r.a.createElement(h,{type:"danger",messages:v}):null,r.a.createElement("button",{className:"btn btn-primary float-right",onSubmit:N},"Submit"))))))},y=a(142),j=a(143),w=a(48),O=a.n(w),k="https://rollplay-mlghr.herokuapp.com",x=function(){function e(){Object(y.a)(this,e)}return Object(j.a)(e,null,[{key:"request",value:function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r,c,s,l,u,m=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},r=m.length>2&&void 0!==m[2]?m[2]:"get",console.debug("API Call:",a,n,r),c="".concat(k,"/").concat(a),s={Authorization:"Bearer ".concat(e.token)},l="get"===r?n:{},t.prev=6,t.next=9,O()({url:c,method:r,data:n,params:l,headers:s});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.response),u=t.t0.response.data.error.message,Array.isArray(u)?u:[u];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserMatches",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("evaluations/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserRandomMe",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat("https://randomuser.me/api","/?inc=name,location,dob,login,picture,email,id&results=1"));case 2:return t=e.sent,a=t.data.results[0],e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getRandomUser",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("users/random");case 2:return t=e.sent,e.abrupt("return",t.usernmae);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createEvaluation",value:function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("evaluations/create",{userEvaluating:t,userEvaluated:a},"post");case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return a=e.sent,e.abrupt("return",a.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return a=e.sent,e.abrupt("return",a.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveProfile",value:function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),a,"patch");case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],c=a[1],s=Object(n.useRef)(!1);return Object(n.useEffect)((function(){console.debug("useTimedMessage useEffect showSavedMessage","active=",r),r&&!s.current&&(s.current=!0,setTimeout((function(){c(!1),s.current=!1}),e))}),[r,e]),[r,c]};var S=function(){var e=Object(n.useContext)(f),t=e.currentUser,a=e.setCurrentUser,c=Object(n.useState)({firstName:t.firstName,lastName:t.lastName,email:t.email,username:t.username,password:""}),s=Object(m.a)(c,2),l=s[0],i=s[1],p=Object(n.useState)([]),v=Object(m.a)(p,2),d=v[0],b=v[1],N=C(),y=Object(m.a)(N,2),j=y[0],w=y[1];function O(){return(O=Object(u.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={firstName:l.firstName,lastName:l.lastName,email:l.email,password:l.password},r=l.username,e.prev=3,e.next=6,x.saveProfile(r,n);case 6:c=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),b(e.t0),console.debug(e.t0),e.abrupt("return");case 14:i((function(e){return Object(E.a)(Object(E.a)({},e),{},{password:""})})),b([]),w(!0),a(c);case 18:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function k(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(g.a)({},a,n))})),b([])}return console.debug("ProfileForm","currentUser=",t,"formData=",l,"formErrors=",d,"saveConfirmed=",j),r.a.createElement("div",{className:"col-md-6 col-lg-4 offset-md-3 offset-lg-4"},r.a.createElement("h3",null,"Profile"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("p",{className:"form-control-plaintext"},l.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{name:"firstName",className:"form-control",value:l.firstName,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{name:"lastName",className:"form-control",value:l.lastName,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{name:"email",className:"form-control",value:l.email,onChange:k})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm password to make changes:"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:l.password,onChange:k})),d.length?r.a.createElement(h,{type:"danger",messages:d}):null,j?r.a.createElement(h,{type:"success",messages:["Updated successfully."]}):null,r.a.createElement("button",{className:"btn btn-primary btn-block mt-4",onClick:function(e){return O.apply(this,arguments)}},"Save Changes")))))};var U=function(e){var t=e.signup,a=Object(d.g)(),c=Object(n.useState)({username:"",password:"",firstName:"",lastName:"",email:""}),s=Object(m.a)(c,2),l=s[0],i=s[1],p=Object(n.useState)([]),f=Object(m.a)(p,2),v=f[0],b=f[1];function N(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(l);case 3:(r=e.sent).success?a.push("/companies"):b(r.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(g.a)({},a,n))}))}return console.debug("SignupForm","signup=",typeof t,"formData=",l,"formErrors=",v),r.a.createElement("div",{className:"SignupForm"},r.a.createElement("div",{className:"container col-md-6 offset-md-3 col-lg-4 offset-lg-4"},r.a.createElement("h2",{className:"mb-3"},"Sign Up"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:N},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",className:"form-control",value:l.username,onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:l.password,autoComplete:"new-password",onChange:j})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First name"),r.a.createElement("input",{name:"firstName",className:"form-control",value:l.firstName,onChange:j,autoComplete:"given-name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last name"),r.a.createElement("input",{name:"lastName",className:"form-control",value:l.lastName,onChange:j,autoComplete:"family-name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",value:l.email,onChange:j,autoComplete:"email"})),v.length?r.a.createElement(h,{type:"danger",messages:v}):null,r.a.createElement("button",{type:"submit",className:"btn btn-primary float-right",onSubmit:N},"Submit"))))))};var P=function(e){var t=e.exact,a=e.path,c=e.children,s=Object(n.useContext)(f).currentUser;return console.debug("PrivateRoute","exact=",t,"path=",a,"currentUser=",s),s?r.a.createElement(d.b,{exact:t,path:a},c):r.a.createElement(d.a,{to:"/login"})},A=a(145);a(175);var L=function(e){var t=e.src,a=e.first,n=e.last,c=e.city,s=e.country,l=e.age;return r.a.createElement("div",{className:"flip-container"},r.a.createElement("div",{className:"flip-card",draggable:"true"},r.a.createElement("div",{className:"flip-card-inner"},r.a.createElement("div",{className:"flip-card-front"},r.a.createElement("img",{className:"flip-image",src:t,alt:""})),r.a.createElement("div",{className:"flip-card-back"},r.a.createElement("h1",{className:"flip-text"},a," ",n),r.a.createElement("p",{className:"flip-text"},"City: ",c),r.a.createElement("p",{className:"flip-text"},"Country: ",s),r.a.createElement("p",{className:"flip-text"},"Age: ",l)))))};a(176);var F=function(){return r.a.createElement("div",{className:"loader"})};a(177);var q=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),l=Object(m.a)(s,2),i=(l[0],l[1],Object(n.useState)([])),p=Object(m.a)(i,2),f=p[0],v=p[1];function d(){return b.apply(this,arguments)}function b(){return(b=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,x.getUserRandomMe();case 4:return t=e.sent,e.next=7,x.getRandomUser();case 7:a=e.sent,console.log(a),v([]),v((function(e){return[].concat(Object(A.a)(e),[{id:t.login.uuid,username:t.login.username,password:t.login.password,first:t.name.first,last:t.name.last,city:t.location.city,country:t.location.country,email:t.email,age:t.dob.age,src:t.picture.large}])})),c(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.debug(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}var g=f.map((function(e){return r.a.createElement(L,{key:e.id,first:e.first,last:e.last_name,city:e.city,country:e.country,age:e.age,src:e.src})}));return r.a.createElement(r.a.Fragment,null,a?r.a.createElement("div",{className:"container text-center"},r.a.createElement("div",{className:"lead"},"Not loading? Try refreshing the page"),r.a.createElement(F,null)):r.a.createElement("div",{style:{textAlign:"center",fontFamily:"Lucida Sans"}},"Tap/hover to learn more",g,r.a.createElement("div",null,r.a.createElement("img",{src:f.src}),r.a.createElement("button",{className:"skipBtn btn btn-danger",onClick:function(){d()}},"Skip"),r.a.createElement("button",{className:"matchBtn btn btn-success",onClick:function(){d()}},"Match"))))};var I=function(e){var t=e.login,a=e.signup;return console.debug("Routes","login=".concat(typeof t),"register=".concat(typeof register)),r.a.createElement("div",{className:"pt-5"},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(b,null)),r.a.createElement(d.b,{exact:!0,path:"/login"},r.a.createElement(N,{login:t})),r.a.createElement(d.b,{exact:!0,path:"/signup"},r.a.createElement(U,{signup:a})),r.a.createElement(d.b,{exact:!0,path:"/match"},r.a.createElement(q,null)),r.a.createElement(P,{path:"/profile"},r.a.createElement(S,null)),r.a.createElement(d.a,{to:"/"})))},R=a(144),M=a.n(R);var B=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),l=Object(m.a)(s,2),d=l[0],b=l[1],g=p("rollplay-token"),E=Object(m.a)(g,2),h=E[0],N=E[1];function y(){return(y=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.signup(t);case 3:return a=e.sent,N(a),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("signup failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function j(){return(j=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.login(t);case 3:return a=e.sent,N(a),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("login failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return console.debug("App","infoLoaded=",a,"currentUser=",d,"token=",h),Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=14;break}return e.prev=1,t=M.a.decode(h),a=t.username,x.token=h,e.next=6,x.getCurrentUser(a);case 6:n=e.sent,b(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("App loadUserInfo: problem loading",e.t0),b(null);case 14:c(!0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}console.debug("App useEffect loadUserInfo","token=",h),c(!1),function(){e.apply(this,arguments)}()}),[h]),a?r.a.createElement(i.a,null,r.a.createElement(f.Provider,{value:{currentUser:d,setCurrentUser:b}},r.a.createElement("div",{className:"App"},r.a.createElement(v,{logout:function(){b(null),N(null)}}),r.a.createElement(I,{login:function(e){return j.apply(this,arguments)},signup:function(e){return y.apply(this,arguments)}})))):r.a.createElement(F,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[146,1,2]]]);
//# sourceMappingURL=main.d352fd82.chunk.js.map